// Global değişken: txt verisinden okunan tüm satırları tutar
let globalBankTextData = [];
let currentBank = "akbank";

// Menü tanımlamaları (örneğin akbank ve enpara)
const menus = {
  akbank: [
    { name: "Hakkında", section: "hakkinda-akbank", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-akbank", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-akbank", icon: "fa-solid fa-note-sticky" }
  ],
  enpara: [
    { name: "Hakkında", section: "hakkinda-enpara", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-enpara", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-enpara", icon: "fa-solid fa-note-sticky" }
  ],
  isbankasi: [
    { name: "Hakkında", section: "hakkinda-isbankasi", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-isbankasi", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-isbankasi", icon: "fa-solid fa-note-sticky" }
  ],
  qnb: [
    { name: "Hakkında", section: "hakkinda-qnb", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-qnb", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-qnb", icon: "fa-solid fa-note-sticky" }
  ],
  vakifbank: [
    { name: "Hakkında", section: "hakkinda-vakifbank", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-vakifbank", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-vakifbank", icon: "fa-solid fa-note-sticky" }
  ],
  yapikredi: [
    { name: "Hakkında", section: "hakkinda-yapikredi", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-yapikredi", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-yapikredi", icon: "fa-solid fa-note-sticky" }
  ],
  fibabanka: [
    { name: "Hakkında", section: "hakkinda-fibabanka", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-fibabanka", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-fibabanka", icon: "fa-solid fa-note-sticky" }
  ],
  kuveytturk: [
    { name: "Hakkında", section: "hakkinda-kuveytturk", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-kuveytturk", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-kuveytturk", icon: "fa-solid fa-note-sticky" }
  ],
  garanti: [
    { name: "Hakkında", section: "hakkinda-garanti", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-garanti", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-garanti", icon: "fa-solid fa-note-sticky" }
  ],
  on: [
    { name: "Hakkında", section: "hakkinda-on", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-on", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-on", icon: "fa-solid fa-note-sticky" }
  ],
  tomhadi: [
    { name: "Hakkında", section: "hakkinda-tomhadi", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-tomhadi", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-tomhadi", icon: "fa-solid fa-note-sticky" }
  ],
  hayatfinans: [
    { name: "Hakkında", section: "hakkinda-hayatfinans", icon: "fa-solid fa-circle-info" },
    { name: "Grafikler", section: "grafikler-hayatfinans", icon: "fa-solid fa-chart-simple" },
    { name: "Notlar", section: "notlar-hayatfinans", icon: "fa-solid fa-note-sticky" }
  ]
};

const bankChartData = {
  akbank: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26","2024-11-27",
      "2024-11-28","2024-11-29","2024-11-30","2024-12-01","2024-12-02","2024-12-03",
      "2024-12-04","2024-12-05","2024-12-06","2024-12-07","2024-12-08","2024-12-09",
      "2024-12-10","2024-12-11","2024-12-12","2024-12-13","2024-12-14","2024-12-15",
      "2024-12-16","2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26","2024-12-27",
      "2024-12-28","2024-12-29","2024-12-30","2024-12-31","2025-01-01","2025-01-02",
      "2025-01-03","2025-01-04","2025-01-05","2025-01-06","2025-01-07","2025-01-08",
      "2025-01-09","2025-01-10","2025-01-11","2025-01-12","2025-01-13","2025-01-14",
      "2025-01-15","2025-01-16","2025-01-17","2025-01-18","2025-01-19","2025-01-20",
      "2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-25","2025-01-26",
      "2025-01-27","2025-01-28","2025-01-29","2025-01-30","2025-01-31","2025-02-01",
      "2025-02-02","2025-02-03","2025-02-04","2025-02-05","2025-02-06","2025-02-07",
      "2025-02-08","2025-02-09","2025-02-10","2025-02-11","2025-02-12","2025-02-13",
      "2025-02-14","2025-02-15","2025-02-16","2025-02-17","2025-02-18","2025-02-19",
      "2025-02-20","2025-02-21"
    ],
    googlePlayData: [
      10,8,9,8,1,15,8,10,4,5,10,14,8,10,7,5,8,5,21,7,13,5,10,10,6,15,14,11,9,7,
      5,8,10,13,21,17,13,5,10,18,12,10,12,8,14,16,13,8,11,9,8,8,13,17,11,13,8,
      8,4,11,8,15,6,7,11,7,10,5,12,8,9,6,11,7,10,7,12,6,10,16,15,17,12,24,16,29,
      13,12,16,13,22,16,17
    ],
    sikayetvarData: [
      0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,77,84,61,71,99,100,102,77,85,70,
      45,83,107,87,61,93,56,55,85,81,57,70,81,74,57,105,99,108,73,58,56,41,87,87,
      105,78,82,49,39,77,81,67,78,74,56,50,119,92,73,77,70,44,59,101,103,119,101,
      73,75,34,88,102,103,73,70,75,43,101,102,86,56,0
    ],
    labelsRating: ['iyi', 'kötü', 'orta'],
    frequenciesRating: [327, 621, 56]
  },
  enpara: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26","2024-11-27",
      "2024-11-28","2024-11-29","2024-11-30","2024-12-01","2024-12-02","2024-12-03",
      "2024-12-04","2024-12-05","2024-12-06","2024-12-07","2024-12-08","2024-12-09",
      "2024-12-10","2024-12-11","2024-12-12","2024-12-13","2024-12-14","2024-12-15",
      "2024-12-16","2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26","2024-12-27",
      "2024-12-28","2024-12-29","2024-12-30","2024-12-31","2025-01-01","2025-01-02",
      "2025-01-03","2025-01-04","2025-01-05","2025-01-06","2025-01-07","2025-01-08",
      "2025-01-09","2025-01-10","2025-01-11","2025-01-12","2025-01-13","2025-01-14",
      "2025-01-15","2025-01-16","2025-01-17","2025-01-18","2025-01-19","2025-01-20",
      "2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-25","2025-01-26",
      "2025-01-27","2025-01-28","2025-01-29","2025-01-30","2025-01-31","2025-02-01",
      "2025-02-02","2025-02-03","2025-02-04","2025-02-05","2025-02-06","2025-02-07",
      "2025-02-08","2025-02-09","2025-02-10","2025-02-11","2025-02-12","2025-02-13",
      "2025-02-14","2025-02-15","2025-02-16","2025-02-17","2025-02-18","2025-02-19",
      "2025-02-20","2025-02-21"
    ],
    googlePlayData: [
      20,20,19,25,13,20,14,22,15,18,
      23,17,18,18,19,20,16,21,1084,702,
      311,198,110,117,123,51,71,59,68,42,
      26,43,35,35,29,33,22,19,24,29,
      34,33,23,26,21,44,20,33,27,19,
      18,13,38,31,25,25,16,20,31,33,
      16,19,17,14,22,18,22,19,18,25,
      23,15,13,19,23,21,30,23,25,17,
      29,23,25,21,19,20,19,34,27,23,
      21,20
    ],
    sikayetvarData: [
      27,26,18,34,24,24,24,20,21,15,
      29,18,20,23,20,16,8,34,41,75,
      31,28,14,13,33,29,38,25,30,17,
      15,18,25,20,28,38,6,16,26,21,
      18,28,33,13,15,26,40,72,61,64,
      28,17,33,31,32,43,27,24,17,26,
      28,32,23,12,9,29,23,18,18,15,
      23,17,10,21,28,30,26,25,21,21,
      32,17,18,18,17,14,13,31,27,23,
      17,3
    ],
    labelsRating: ['iyi', 'kötü', 'orta'],
    frequenciesRating: [3330,1269,180]
  },
  kuveytturk: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26",
      "2024-11-27","2024-11-28","2024-11-29","2024-11-30","2024-12-01",
      "2024-12-02","2024-12-03","2024-12-04","2024-12-05","2024-12-06",
      "2024-12-07","2024-12-08","2024-12-09","2024-12-10","2024-12-11",
      "2024-12-12","2024-12-13","2024-12-14","2024-12-15","2024-12-16",
      "2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26",
      "2024-12-27","2024-12-28","2024-12-29","2024-12-30","2024-12-31",
      "2025-01-01","2025-01-02","2025-01-03","2025-01-04","2025-01-05",
      "2025-01-06","2025-01-07","2025-01-08","2025-01-09","2025-01-10",
      "2025-01-11","2025-01-12","2025-01-13","2025-01-14","2025-01-15",
      "2025-01-16","2025-01-17","2025-01-18","2025-01-19","2025-01-20",
      "2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-25",
      "2025-01-26","2025-01-27","2025-01-28","2025-01-29","2025-01-30",
      "2025-01-31","2025-02-01","2025-02-02","2025-02-03","2025-02-04",
      "2025-02-05","2025-02-06","2025-02-07","2025-02-08","2025-02-09",
      "2025-02-10","2025-02-11","2025-02-12","2025-02-13","2025-02-14",
      "2025-02-15","2025-02-16","2025-02-17","2025-02-18","2025-02-19",
      "2025-02-20","2025-02-21"
    ],
    googlePlayData: [
      41,15,17,14,6,
      9,7,4,5,6,
      8,5,17,18,18,
      15,9,18,13,14,
      6,7,8,5,6,
      11,7,5,5,4,
      7,7,10,3,6,
      9,5,3,13,10,
      14,10,5,2,5,
      11,9,8,12,3,
      7,10,5,4,11,
      6,3,5,5,6,
      4,9,1,5,2,
      3,3,3,5,8,
      5,4,2,8,5,
      4,1,9,3,2,
      10,7,10,7,8,
      8,3,6,4,3,
      1,6
    ],
    sikayetvarData: [
      17,12,6,13,14,
      7,11,15,9,6,
      11,11,17,33,12,
      8,4,20,19,22,
      11,22,8,8,32,
      19,11,13,19,10,
      8,17,17,24,8,
      19,4,1,12,17,
      6,13,9,9,7,
      21,12,10,17,10,
      5,2,10,8,8,
      14,12,6,9,13,
      6,11,7,5,8,
      4,9,18,9,10,
      7,5,6,14,18,
      10,13,12,6,11,
      13,13,15,5,10,
      25,6,17,16,10,
      19,2
    ],
    labelsRating: ['iyi', 'kötü', 'orta'],
    frequenciesRating: [374,270,52]
  },
  on: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26",
      "2024-11-27","2024-11-28","2024-11-29","2024-11-30","2024-12-01",
      "2024-12-02","2024-12-03","2024-12-04","2024-12-05","2024-12-06",
      "2024-12-07","2024-12-08","2024-12-09","2024-12-10","2024-12-11",
      "2024-12-12","2024-12-13","2024-12-14","2024-12-15","2024-12-16",
      "2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26",
      "2024-12-27","2024-12-28","2024-12-29","2024-12-30","2024-12-31",
      "2025-01-01","2025-01-02","2025-01-03","2025-01-04","2025-01-05",
      "2025-01-06","2025-01-07","2025-01-08","2025-01-09","2025-01-10",
      "2025-01-11","2025-01-12","2025-01-13","2025-01-14","2025-01-15",
      "2025-01-16","2025-01-17","2025-01-18","2025-01-19","2025-01-20",
      "2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-25",
      "2025-01-26","2025-01-27","2025-01-28","2025-01-29","2025-01-30",
      "2025-01-31","2025-02-01","2025-02-02","2025-02-03","2025-02-04",
      "2025-02-05","2025-02-06","2025-02-07","2025-02-08","2025-02-09",
      "2025-02-10","2025-02-11","2025-02-12","2025-02-13","2025-02-14",
      "2025-02-15","2025-02-16","2025-02-17","2025-02-18","2025-02-19",
      "2025-02-20","2025-02-21"
    ],
    googlePlayData: [
      2,1,1,4,2,
      0,3,2,3,1,
      3,3,4,4,8,
      2,2,7,0,5,
      3,3,2,1,2,
      5,5,2,3,0,
      1,5,1,7,7,
      0,2,2,4,5,
      1,4,12,44,15,
      49,28,17,11,14,
      6,7,30,9,13,
      6,6,1,4,9,
      7,7,4,9,3,
      3,5,25,7,2,
      5,0,2,7,4,
      13,4,31,3,2,
      12,3,4,9,22,
      12,3,14,8,21,
      9,1
    ],
    sikayetvarData: [
      0,3,0,2,2,
      2,3,2,0,2,
      3,2,5,2,4,
      2,3,1,4,4,
      2,4,0,3,2,
      5,0,3,1,1,
      0,1,3,3,6,
      1,0,1,4,2,
      1,3,2,4,1,
      2,5,1,0,2,
      2,2,0,3,4,
      4,3,1,1,6,
      4,4,6,4,3,
      0,1,5,7,3,
      3,1,7,9,2,
      6,3,6,2,4,
      9,4,0,4,4,
      6,2,9,14,11,
      4,0
    ],
    labelsRating: ['iyi', 'kötü', 'orta'],
    frequenciesRating: [194,428,42]
  },
  tomhadi: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26",
      "2024-11-27","2024-11-28","2024-11-29","2024-11-30","2024-12-01",
      "2024-12-02","2024-12-03","2024-12-04","2024-12-05","2024-12-06",
      "2024-12-07","2024-12-08","2024-12-09","2024-12-10","2024-12-11",
      "2024-12-12","2024-12-13","2024-12-14","2024-12-15","2024-12-16",
      "2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26",
      "2024-12-27","2024-12-28","2024-12-29","2024-12-30","2024-12-31",
      "2025-01-01","2025-01-02","2025-01-03","2025-01-04","2025-01-05",
      "2025-01-06","2025-01-07","2025-01-08","2025-01-09","2025-01-10",
      "2025-01-11","2025-01-12","2025-01-13","2025-01-14","2025-01-15",
      "2025-01-16","2025-01-17","2025-01-18","2025-01-19","2025-01-20",
      "2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-25",
      "2025-01-26","2025-01-27","2025-01-28","2025-01-29","2025-01-30",
      "2025-01-31","2025-02-01","2025-02-02","2025-02-03","2025-02-04",
      "2025-02-05","2025-02-06","2025-02-07","2025-02-08","2025-02-09",
      "2025-02-10","2025-02-11","2025-02-12","2025-02-13","2025-02-14",
      "2025-02-15","2025-02-16","2025-02-17","2025-02-18","2025-02-19",
      "2025-02-20","2025-02-21"
    ],
    googlePlayData: [
      14,12,14,13,14,
      14,11,10,13,20,
      15,12,19,22,14,
      27,6,14,21,19,
      15,13,21,14,11,
      16,6,3,9,7,
      5,11,3,6,4,
      4,4,3,9,9,
      3,10,8,2,3,
      5,2,3,5,7,
      6,5,7,12,6,
      6,6,2,7,11,
      13,10,20,28,18,
      40,16,15,20,18,
      22,22,16,25,28,
      18,18,19,17,19,
      26,16,22,19,15,
      16,14,16,18,14,
      19,7
    ],
    sikayetvarData: [
      5,3,5,9,12,
      9,3,5,4,0,
      7,11,11,8,14,
      6,2,16,10,14,
      4,8,5,3,8,
      9,6,6,7,5,
      4,6,5,10,4,
      5,6,9,4,5,
      4,5,5,1,6,
      4,0,6,3,5,
      6,6,5,6,5,
      6,9,4,7,3,
      8,4,6,7,5,
      8,8,3,6,3,
      11,6,3,6,7,
      5,9,15,5,13,
      8,10,3,7,8,
      10,3,7,15,9,
      7,3
    ],
    labelsRating: ['iyi', 'kötü', 'orta'],
    frequenciesRating: [819,336,42]
  },
  isbankasi: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26","2024-11-27","2024-11-28","2024-11-29","2024-11-30","2024-12-01",
      "2024-12-02","2024-12-03","2024-12-04","2024-12-05","2024-12-06","2024-12-07","2024-12-08","2024-12-09","2024-12-10","2024-12-11",
      "2024-12-12","2024-12-13","2024-12-14","2024-12-15","2024-12-16","2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26","2024-12-27","2024-12-28","2024-12-29","2024-12-30","2024-12-31",
      "2025-01-01","2025-01-02","2025-01-03","2025-01-04","2025-01-05","2025-01-06","2025-01-07","2025-01-08","2025-01-09","2025-01-10",
      "2025-01-11","2025-01-12","2025-01-13","2025-01-14","2025-01-15","2025-01-16","2025-01-17","2025-01-18","2025-01-19","2025-01-20",
      "2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-25","2025-01-26","2025-01-27","2025-01-28","2025-01-29","2025-01-30",
      "2025-01-31","2025-02-01","2025-02-02","2025-02-03","2025-02-04","2025-02-05","2025-02-06","2025-02-07","2025-02-08","2025-02-09",
      "2025-02-10","2025-02-11","2025-02-12","2025-02-13","2025-02-14","2025-02-15","2025-02-16","2025-02-17","2025-02-18","2025-02-19",
      "2025-02-20","2025-02-21"
    ],
    googlePlayData: [
      34, 32, 28, 31, 38, 40, 35, 26, 27, 32,
      40, 22, 33, 31, 32, 14, 17, 33, 31, 34,
      30, 24, 20, 30, 38, 37, 43, 34, 41, 20,
      25, 36, 62, 103, 95, 132, 118, 58, 81, 69,
      52, 46, 55, 48, 38, 74, 50, 53, 46, 47,
      25, 31, 42, 50, 63, 44, 38, 36, 31, 41,
      29, 29, 48, 43, 30, 26, 41, 39, 42, 33,
      27, 41, 25, 38, 30, 32, 36, 34, 33, 22,
      43, 41, 52, 65, 69, 66, 28, 65, 67, 44,
      57, 19
    ],
    sikayetvarData: [
      23, 23,  9, 29, 41, 27, 47, 28, 17, 17,
      26, 31, 26, 44, 31, 27, 19, 22, 31, 26,
      26, 41, 11, 29, 39, 42, 40, 23, 36, 17,
      14, 31, 23, 23, 22, 28, 26, 25, 41, 25,
      12, 27, 34, 27, 23, 38, 41, 53, 23, 40,
      24, 23, 37, 41, 40, 38, 39, 12, 19, 48,
      28, 32, 21, 31, 20, 20, 38, 26, 35, 27,
      28, 22, 13, 22, 24, 36, 42, 41, 19, 14,
      36, 44, 34, 33, 40, 40, 26, 46, 43, 38,
      42, 25
    ],
    labelsRating : ['iyi', 'kötü', 'orta'],
    frequenciesRating : [2384, 1337, 189]
  },
  qnb: {
    dateLabels: [
      "2024-11-22",
      "2024-11-23",
      "2024-11-24",
      "2024-11-25",
      "2024-11-26",
      "2024-11-27",
      "2024-11-28",
      "2024-11-29",
      "2024-11-30",
      "2024-12-01",
      "2024-12-02",
      "2024-12-03",
      "2024-12-04",
      "2024-12-05",
      "2024-12-06",
      "2024-12-07",
      "2024-12-08",
      "2024-12-09",
      "2024-12-10",
      "2024-12-11",
      "2024-12-12",
      "2024-12-13",
      "2024-12-14",
      "2024-12-15",
      "2024-12-16",
      "2024-12-17",
      "2024-12-18",
      "2024-12-19",
      "2024-12-20",
      "2024-12-21",
      "2024-12-22",
      "2024-12-23",
      "2024-12-24",
      "2024-12-25",
      "2024-12-26",
      "2024-12-27",
      "2024-12-28",
      "2024-12-29",
      "2024-12-30",
      "2024-12-31",
      "2025-01-01",
      "2025-01-02",
      "2025-01-03",
      "2025-01-04",
      "2025-01-05",
      "2025-01-06",
      "2025-01-07",
      "2025-01-08",
      "2025-01-09",
      "2025-01-10",
      "2025-01-11",
      "2025-01-12",
      "2025-01-13",
      "2025-01-14",
      "2025-01-15",
      "2025-01-16",
      "2025-01-17",
      "2025-01-18",
      "2025-01-19",
      "2025-01-20",
      "2025-01-21",
      "2025-01-22",
      "2025-01-23",
      "2025-01-24",
      "2025-01-25",
      "2025-01-26",
      "2025-01-27",
      "2025-01-28",
      "2025-01-29",
      "2025-01-30",
      "2025-01-31",
      "2025-02-01",
      "2025-02-02",
      "2025-02-03",
      "2025-02-04",
      "2025-02-05",
      "2025-02-06",
      "2025-02-07",
      "2025-02-08",
      "2025-02-09",
      "2025-02-10",
      "2025-02-11",
      "2025-02-12",
      "2025-02-13",
      "2025-02-14",
      "2025-02-15",
      "2025-02-16",
      "2025-02-17",
      "2025-02-18",
      "2025-02-19",
      "2025-02-20",
      "2025-02-21"
    ],
    googlePlayData: [
      34, 11, 19, 24, 28, 17, 21, 18, 9, 12,
      22, 18, 12, 17, 26, 14, 5, 36, 33, 31,
      31, 25, 16, 15, 42, 24, 17, 21, 17, 10,
      10, 19, 20, 20, 9, 11, 7, 4, 12, 23,
      5, 13, 20, 8, 7, 33, 18, 20, 11, 16,
      5, 10, 16, 12, 35, 23, 9, 8, 5, 24,
      17, 17, 17, 16, 11, 9, 15, 19, 8, 13,
      17, 9, 8, 11, 16, 20, 19, 13, 5, 13,
      18, 25, 14, 10, 18, 13, 4, 23, 20, 18,
      19, 18
    ],
    sikayetvarData: [
      30, 30, 17, 43, 37, 50, 42, 41, 36, 27,
      49, 51, 52, 71, 54, 32, 28, 53, 67, 142,
      157, 86, 57, 61, 70, 156, 224, 96, 86, 49,
      29, 76, 52, 54, 53, 53, 38, 18, 40, 36,
      25, 43, 53, 38, 28, 50, 67, 66, 61, 70,
      41, 28, 51, 43, 55, 59, 36, 41, 29, 46,
      43, 35, 36, 28, 24, 20, 53, 40, 42, 44,
      36, 31, 18, 38, 45, 39, 44, 50, 18, 19,
      41, 31, 32, 44, 36, 31, 29, 45, 49, 53,
      39, 25
    ],
    labelsRating : ['iyi', 'kötü', 'orta'],
    frequenciesRating : [1048, 426, 57]
  },
  vakifbank: {
    dateLabels: [
      "2024-11-22",
      "2024-11-23",
      "2024-11-24",
      "2024-11-25",
      "2024-11-26",
      "2024-11-27",
      "2024-11-28",
      "2024-11-29",
      "2024-11-30",
      "2024-12-01",
      "2024-12-02",
      "2024-12-03",
      "2024-12-04",
      "2024-12-05",
      "2024-12-06",
      "2024-12-07",
      "2024-12-08",
      "2024-12-09",
      "2024-12-10",
      "2024-12-11",
      "2024-12-12",
      "2024-12-13",
      "2024-12-14",
      "2024-12-15",
      "2024-12-16",
      "2024-12-17",
      "2024-12-18",
      "2024-12-19",
      "2024-12-20",
      "2024-12-21",
      "2024-12-22",
      "2024-12-23",
      "2024-12-24",
      "2024-12-25",
      "2024-12-26",
      "2024-12-27",
      "2024-12-28",
      "2024-12-29",
      "2024-12-30",
      "2024-12-31",
      "2025-01-01",
      "2025-01-02",
      "2025-01-03",
      "2025-01-04",
      "2025-01-05",
      "2025-01-06",
      "2025-01-07",
      "2025-01-08",
      "2025-01-09",
      "2025-01-10",
      "2025-01-11",
      "2025-01-12",
      "2025-01-13",
      "2025-01-14",
      "2025-01-15",
      "2025-01-16",
      "2025-01-17",
      "2025-01-18",
      "2025-01-19",
      "2025-01-20",
      "2025-01-21",
      "2025-01-22",
      "2025-01-23",
      "2025-01-24",
      "2025-01-25",
      "2025-01-26",
      "2025-01-27",
      "2025-01-28",
      "2025-01-29",
      "2025-01-30",
      "2025-01-31",
      "2025-02-01",
      "2025-02-02",
      "2025-02-03",
      "2025-02-04",
      "2025-02-05",
      "2025-02-06",
      "2025-02-07",
      "2025-02-08",
      "2025-02-09",
      "2025-02-10",
      "2025-02-11",
      "2025-02-12",
      "2025-02-13",
      "2025-02-14",
      "2025-02-15",
      "2025-02-16",
      "2025-02-17",
      "2025-02-18",
      "2025-02-19",
      "2025-02-20",
      "2025-02-21"
    ],
    googlePlayData: [
      28, 26, 17, 29, 24, 15, 15, 10, 9, 9,
      22, 14, 5, 15, 18, 13, 8, 26, 16, 15,
      14, 8, 11, 15, 17, 8, 17, 10, 14, 7,
      5, 20, 22, 25, 17, 19, 10, 13, 23, 17,
      18, 21, 16, 16, 11, 25, 21, 10, 18, 19,
      18, 8, 16, 16, 17, 14, 17, 20, 12, 19,
      12, 11, 12, 14, 11, 15, 15, 8, 9, 8,
      14, 10, 5, 11, 9, 15, 13, 13, 5, 6,
      17, 11, 12, 11, 9, 17, 11, 17, 17, 15,
      11, 8
    ],
    sikayetvarData: [
      52, 35, 28, 71, 75, 50, 37, 72, 25, 33,
      66, 54, 60, 60, 80, 40, 32, 55, 46, 60,
      51, 46, 34, 69, 78, 67, 77, 70, 63, 47,
      45, 58, 52, 47, 45, 56, 41, 19, 49, 80,
      37, 57, 61, 32, 37, 74, 58, 52, 51, 51,
      50, 26, 66, 57, 84, 74, 64, 42, 33, 71,
      59, 52, 43, 43, 31, 24, 67, 58, 51, 54,
      76, 50, 28, 62, 63, 64, 49, 66, 52, 32,
      67, 68, 64, 55, 49, 78, 37, 89, 77, 65,
      70, 43
    ],
    labelsRating : ['iyi', 'kötü', 'orta'],
    frequenciesRating : [987, 304, 39]
    },
  hayatfinans: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26",
      "2024-11-27","2024-11-28","2024-11-29","2024-11-30","2024-12-01",
      "2024-12-02","2024-12-03","2024-12-04","2024-12-05","2024-12-06",
      "2024-12-07","2024-12-08","2024-12-09","2024-12-10","2024-12-11",
      "2024-12-13","2024-12-14","2024-12-15","2024-12-18","2024-12-20",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-27",
      "2024-12-28","2024-12-29","2024-12-30","2025-01-01","2025-01-02",
      "2025-01-04","2025-01-05","2025-01-08","2025-01-11","2025-01-16",
      "2025-01-18","2025-01-19","2025-01-20","2025-01-21","2025-01-22",
      "2025-01-23","2025-01-24","2025-01-25","2025-01-26","2025-01-27",
      "2025-01-28","2025-01-29","2025-01-30","2025-01-31","2025-02-01",
      "2025-02-02","2025-02-03","2025-02-04","2025-02-05","2025-02-06",
      "2025-02-09","2025-02-10","2025-02-11","2025-02-12","2025-02-13",
      "2025-02-14","2025-02-15","2025-02-16","2025-02-17","2025-02-18",
      "2025-02-19","2025-02-20"
    ],
    googlePlayData: [2,1,3,3,3,4,2,1,0,1,2,1,0,3,1,4,2,1,2,1,1,3,2,1,1,1,4,2,2,4,1,1,2,2,0,2,0,1,2,0,1,1,1,1,0,1,0,1,1,1,9,2,4,3,1,2,3,3,3,2,2,1,1,0,1,2,1,1,2,6,1,1],
    sikayetvarData: [0,1,0,1,1,3,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2,1,0,1,0,0,1,2,1,2,0,1,0,1,0,2,1,0,2,0,1,0,2,1,0,0,1,0,0,2,2,2,1,0,1,0,0,0,0],
    labelsRating: ['iyi', 'kötü', 'orta'],
    frequenciesRating: [88,37,3]
  },
  yapikredi: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26",
      "2024-11-27","2024-11-28","2024-11-29","2024-11-30","2024-12-01",
      "2024-12-02","2024-12-03","2024-12-04","2024-12-05","2024-12-06",
      "2024-12-07","2024-12-08","2024-12-09","2024-12-10","2024-12-11",
      "2024-12-12","2024-12-13","2024-12-14","2024-12-15","2024-12-16",
      "2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26",
      "2024-12-27","2024-12-28","2024-12-29","2024-12-30","2024-12-31",
      "2025-01-01","2025-01-02","2025-01-03","2025-01-04","2025-01-05",
      "2025-01-06","2025-01-07","2025-01-08","2025-01-09","2025-01-10",
      "2025-01-11","2025-01-12","2025-01-13","2025-01-14","2025-01-15",
      "2025-01-16","2025-01-17","2025-01-18","2025-01-19","2025-01-20",
      "2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-25",
      "2025-01-26","2025-01-27","2025-01-28","2025-01-29","2025-01-30",
      "2025-01-31","2025-02-01","2025-02-02","2025-02-03","2025-02-04",
      "2025-02-05","2025-02-06","2025-02-07","2025-02-08","2025-02-09",
      "2025-02-10","2025-02-11","2025-02-12","2025-02-13","2025-02-14",
      "2025-02-15","2025-02-16","2025-02-17","2025-02-18","2025-02-19",
      "2025-02-20","2025-02-21"
    ],
    googlePlayData: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,44,65,57,60,64,55,55,54,33,40,32,45,47,73,131,120,103,66,85,108,120,127,109,80,80,95,77,58,50,29,15,10,24,10,24,12,13,7,4,7,9,8,8,7,12,8,8,9,9,7,9,20,6,8,13,79,232,184,122,87,148,140,106,84,96,119,56,74,59,59,99,127],
    sikayetvarData: [47,19,24,54,41,39,37,49,25,25,51,54,46,53,58,24,25,55,56,49,53,53,23,33,56,55,38,40,51,29,19,51,44,49,43,46,30,24,49,54,31,67,60,42,38,73,60,64,71,66,42,36,54,60,77,60,55,34,23,57,58,53,47,69,31,25,50,64,49,37,70,35,31,65,75,70,56,62,32,27,73,73,48,47,46,58,32,81,62,60,66,25],
    labelsRating: ['iyi', 'kötü', 'orta'],
    frequenciesRating: [3497,661,142]
  },
  fibabanka: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26",
      "2024-11-27","2024-11-28","2024-11-29","2024-11-30","2024-12-01",
      "2024-12-02","2024-12-03","2024-12-04","2024-12-05","2024-12-06",
      "2024-12-07","2024-12-08","2024-12-09","2024-12-10","2024-12-11",
      "2024-12-12","2024-12-13","2024-12-14","2024-12-15","2024-12-16",
      "2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26",
      "2024-12-27","2024-12-28","2024-12-29","2024-12-30","2024-12-31",
      "2025-01-01","2025-01-02","2025-01-03","2025-01-04","2025-01-05",
      "2025-01-06","2025-01-07","2025-01-08","2025-01-09","2025-01-10",
      "2025-01-11","2025-01-12","2025-01-13","2025-01-14","2025-01-15",
      "2025-01-16","2025-01-17","2025-01-18","2025-01-19","2025-01-20",
      "2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-25",
      "2025-01-26","2025-01-27","2025-01-28","2025-01-29","2025-01-30",
      "2025-01-31","2025-02-01","2025-02-02","2025-02-03","2025-02-04",
      "2025-02-05","2025-02-06","2025-02-07","2025-02-08","2025-02-09",
      "2025-02-10","2025-02-11","2025-02-12","2025-02-13","2025-02-14",
      "2025-02-15","2025-02-16","2025-02-17","2025-02-18","2025-02-19",
      "2025-02-20","2025-02-21"
    ],
    googlePlayData: [1,3,5,7,3,3,1,3,3,3,4,4,10,2,5,3,8,7,5,6,7,11,3,5,6,1,3,3,5,2,2,4,5,5,3,7,3,0,4,8,4,5,4,4,1,4,8,2,1,5,3,4,5,6,6,5,3,2,2,7,5,4,5,5,4,2,7,2,3,5,1,2,2,4,4,8,5,4,2,3,5,0,3,1,11,5,4,4,6,2,5,7],
    sikayetvarData: [1,4,3,7,7,4,3,2,4,5,11,4,7,6,4,1,2,8,7,5,4,4,5,3,6,7,3,9,3,4,0,6,8,5,9,5,1,2,9,1,1,4,4,2,4,4,9,4,6,4,1,3,4,5,7,6,7,1,6,7,5,7,4,7,3,2,6,7,5,4,3,2,2,2,6,4,9,3,3,6,7,10,8,8,3,2,3,7,9,10,9,5],
    labelsRating: ['iyi', 'kötü', 'orta'],
    frequenciesRating: [279,89,16]
  },
  garanti: {
    dateLabels: [
      "2024-11-22","2024-11-23","2024-11-24","2024-11-25","2024-11-26",
      "2024-11-27","2024-11-28","2024-11-29","2024-11-30","2024-12-01",
      "2024-12-02","2024-12-03","2024-12-04","2024-12-05","2024-12-06",
      "2024-12-07","2024-12-08","2024-12-09","2024-12-10","2024-12-11",
      "2024-12-12","2024-12-13","2024-12-14","2024-12-15","2024-12-16",
      "2024-12-17","2024-12-18","2024-12-19","2024-12-20","2024-12-21",
      "2024-12-22","2024-12-23","2024-12-24","2024-12-25","2024-12-26",
      "2024-12-27","2024-12-28","2024-12-29","2024-12-30","2024-12-31",
      "2025-01-01","2025-01-02","2025-01-03","2025-01-04","2025-01-05",
      "2025-01-06","2025-01-07","2025-01-08","2025-01-09","2025-01-10",
      "2025-01-11","2025-01-12","2025-01-13","2025-01-14","2025-01-15",
      "2025-01-16","2025-01-17","2025-01-18","2025-01-19","2025-01-20",
      "2025-01-21","2025-01-22","2025-01-23","2025-01-24","2025-01-25",
      "2025-01-26","2025-01-27","2025-01-28","2025-01-29","2025-01-30",
      "2025-01-31","2025-02-01","2025-02-02","2025-02-03","2025-02-04",
      "2025-02-05","2025-02-06","2025-02-07","2025-02-08","2025-02-09",
      "2025-02-10","2025-02-11","2025-02-12","2025-02-13","2025-02-14",
      "2025-02-15","2025-02-16","2025-02-17","2025-02-18","2025-02-19",
      "2025-02-20","2025-02-21"
    ],
    googlePlayData: [33,24,24,45,39,34,33,37,26,31,40,37,44,43,31,45,31,50,50,45,49,45,41,29,43,55,93,53,52,29,40,52,47,45,45,54,28,29,42,47,32,49,42,31,31,54,44,40,34,40,36,32,41,34,46,32,40,34,34,49,25,33,21,41,29,18,40,45,28,20,33,31,18,44,41,53,31,26,25,32,39,35,40,24,23,19,30,49,40,36,39,35],
    sikayetvarData: [43,36,35,52,63,69,63,56,33,32,75,73,83,75,68,40,26,78,82,77,57,69,47,38,70,68,70,66,69,35,36,60,76,80,48,69,40,40,63,82,36,71,56,32,29,61,84,77,57,53,37,35,65,68,63,79,58,22,25,49,51,58,51,44,33,26,50,72,67,55,53,45,40,76,75,67,76,61,46,30,69,70,84,76,53,38,33,69,68,77,64,38],
    labelsRating: ['iyi', 'kötü', 'orta'],
    frequenciesRating: [2094,1239,145]
  }
};

  

function activateMenuItem(element) {
  document.querySelectorAll('#navMenu a').forEach(a => a.classList.remove('active'));
  element.classList.add('active');
}

function loadMenu(menuKey) {
  const navMenu = document.getElementById("navMenu");
  navMenu.innerHTML = "";
  menus[menuKey].forEach(item => {
    const li = document.createElement("li");
    const a = document.createElement("a");
    a.href = "#";
    a.textContent = item.name + " "; // Boşluk, ikon için
    const i = document.createElement('i');
    i.classList = item.icon;
    a.appendChild(i);
    a.onclick = function(e) {
      e.preventDefault();
      activateMenuItem(this);
      showSection(item.section);
    };
    li.appendChild(a);
    navMenu.appendChild(li);
  });
}

function switchMenu(menuKey) {
  currentBank = menuKey;
  loadMenu(menuKey);
  const firstMenuItem = document.querySelector('#navMenu a');
  if (firstMenuItem) {
    activateMenuItem(firstMenuItem);
    showSection(menus[menuKey][0].section);
  }
  // Menü seçildiğinde ilgili bankanın inline txt verisini yüklüyoruz
  loadBankTextData(menuKey);
  loadBankCarousel();
  loadTimelineChart();
  loadRatingDistributionChart();
  loadNotes();
}

function showSection(sectionId) {
  document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
  document.getElementById(sectionId).classList.add('active');
}

// Inline txt verisini, ilgili banka id'sine göre (ör. "akbank") okuyup global değişkene atar
function loadBankTextData(bankId) {
    const bankDataMap = {
      akbank: window.akbankData,
      enpara: window.enparaData,
      isbankasi: window.isbankasiData,
      garanti: window.garantiData,
      fibabanka: window.fibabankaData,
      qnb: window.qnbData,
      hayatfinans: window.hayatfinansData,
      kuveytturk: window.kuveytturkData,
      on: window.onData,
      tomhadi: window.tomhadiData,
      vakifbank: window.vakifbankData,
      yapikredi: window.yapikrediData,
    };
  
    const data = bankDataMap[bankId];
    if (!data) {
      console.error(`Veri bulunamadı: ${bankId}`);
      globalBankTextData = [];
    } else {
      globalBankTextData = data.split(/\r?\n/).map(line => line.trim()).filter(line => line);
    }
  }
  

// Global diziden rastgele 10 yorum seçen fonksiyon
function getRandom10Comments(dataArray) {
  const shuffled = [...dataArray].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, 10);
}

// Carousel'e yorumları yükleyen fonksiyon
function loadBankCarousel() {
    const randomComments = getRandom10Comments(globalBankTextData);
    // Tüm carousel öğelerini tek tek destroy edip temizliyoruz
    $('.owl-carousel').each(function () {
      if ($(this).data('owl.carousel')) {
        $(this).trigger('destroy.owl.carousel');
      }
      $(this).html('');
    });
    
    // Aktif bankanın carousel'ini seçiyoruz (örneğin "akbankCarousel" veya "enparaCarousel")
    const carousel = $(`#${currentBank}Carousel`);
  
    randomComments.forEach(comment => {
      const itemHtml = `<div class="item">${comment}</div>`;
      carousel.append(itemHtml);
    });
  
    carousel.owlCarousel({
      loop: true,
      margin: 10,
      nav: true,
      autoplay:true,
      autoplayTimeout: 2500,      // her 3 saniyede bir geçiş yapar (3000 milisaniye)
      autoplaySpeed: 1000,  
      autoplayHoverPause: true, // Mouse üzerine gelince autoplay durur
      responsive: {
        0: { items: 1 },
        600: { items: 2 },
        1000: { items: 5 }
      }
    });
  }
  
  //Karıştır Gitsin butonu
  document.addEventListener("DOMContentLoaded", () => {
    const shuffleButtons = document.getElementsByClassName("shuffle-button");
    Array.from(shuffleButtons).forEach(button => {
      button.addEventListener("click", () => {
        loadBankCarousel();
      });
    });
  });
  

  // Modal (Pop-up)
  let currentScale = 1;
  function openModal(src) {
    const modal = document.getElementById("imgModal");
    const modalImg = document.getElementById("modalImg");
    modalImg.src = src;
    modal.style.display = "flex";
    currentScale = 1;
    modalImg.style.transform = `scale(${currentScale})`;
  }

  function closeModal(event) {
    if (event.target.classList.contains('modal') || event.target.classList.contains('close')) {
      document.getElementById("imgModal").style.display = "none";
    }
  }

  function zoomIn(event) {
    event.stopPropagation();
    const modalImg = document.getElementById("modalImg");
    currentScale += 0.2;
    modalImg.style.transform = `scale(${currentScale})`;
  }

  function zoomOut(event) {
    event.stopPropagation();
    const modalImg = document.getElementById("modalImg");
    currentScale = Math.max(0.2, currentScale - 0.2);
    modalImg.style.transform = `scale(${currentScale})`;
  }

// Notlar (Local Storage) için global değişken
let editingIndex = -1;

function loadNotes() {
  // İlgili banka için container'ı seçiyoruz
  const noteList = document.querySelector(`#notlar-${currentBank} #noteList`);
  noteList.innerHTML = "";
  const notesKey = "notes-" + currentBank;
  const notes = JSON.parse(localStorage.getItem(notesKey)) || [];
  notes.forEach((note, index) => {
    const li = document.createElement('li');
    li.textContent = note;
    const actionsDiv = document.createElement('div');
    actionsDiv.className = 'note-actions';
    const editBtn = document.createElement('button');
    editBtn.textContent = 'Düzenle';
    editBtn.onclick = () => startEditNote(index);
    const deleteBtn = document.createElement('button');
    deleteBtn.textContent = 'Sil';
    deleteBtn.onclick = () => deleteNote(index);
    actionsDiv.appendChild(editBtn);
    actionsDiv.appendChild(deleteBtn);
    li.appendChild(actionsDiv);
    noteList.appendChild(li);
  });
}

function saveNotes(notes) {
  const notesKey = "notes-" + currentBank;
  localStorage.setItem(notesKey, JSON.stringify(notes));
}

function addNote() {
  const noteInput = document.querySelector(`#notlar-${currentBank} #noteInput`);
  const noteText = noteInput.value.trim();
  if (noteText !== "") {
    const notesKey = "notes-" + currentBank;
    const notes = JSON.parse(localStorage.getItem(notesKey)) || [];
    notes.push(noteText);
    saveNotes(notes);
    noteInput.value = "";
    loadNotes();
  }
}

function startEditNote(index) {
  const notesKey = "notes-" + currentBank;
  const notes = JSON.parse(localStorage.getItem(notesKey)) || [];
  const noteInput = document.querySelector(`#notlar-${currentBank} #noteInput`);
  noteInput.value = notes[index];
  editingIndex = index;
  // Butonların container'ını ilgili banka alanından seçiyoruz
  document.querySelector(`#notlar-${currentBank} #addNoteBtn`).style.display = 'none';
  document.querySelector(`#notlar-${currentBank} #updateNoteBtn`).style.display = 'inline-block';
}

function updateNote() {
  const noteInput = document.querySelector(`#notlar-${currentBank} #noteInput`);
  const noteText = noteInput.value.trim();
  if (noteText !== "" && editingIndex > -1) {
    const notesKey = "notes-" + currentBank;
    const notes = JSON.parse(localStorage.getItem(notesKey)) || [];
    notes[editingIndex] = noteText;
    saveNotes(notes);
    noteInput.value = "";
    editingIndex = -1;
    document.querySelector(`#notlar-${currentBank} #addNoteBtn`).style.display = 'inline-block';
    document.querySelector(`#notlar-${currentBank} #updateNoteBtn`).style.display = 'none';
    loadNotes();
  }
}

function deleteNote(index) {
  const notesKey = "notes-" + currentBank;
  const notes = JSON.parse(localStorage.getItem(notesKey)) || [];
  notes.splice(index, 1);
  saveNotes(notes);
  loadNotes();
}

  // Yorumlar/Şikayetler Sıklık Grafiği (Hakkında)
  function loadTimelineChart() {
    const canvasId = 'timelineChart-' + currentBank;
    const canvas = document.getElementById(canvasId);
    if (!canvas) {
      console.error("Canvas bulunamadı: " + canvasId);
      return;
    }
    const ctx = canvas.getContext('2d');
  
    // Global nesneyi oluşturuyoruz, yoksa
    if (!window.timelineCharts) {
      window.timelineCharts = {};
    }
    
    // Eğer mevcut banka için bir grafik varsa destroy ediyoruz
    if (window.timelineCharts[currentBank]) {
      window.timelineCharts[currentBank].destroy();
    }
  
    // Yeni Chart örneğini oluşturup globalde saklıyoruz
    const chartInstance = new Chart(ctx, {
      type: 'line',
      data: {
        labels: bankChartData[currentBank].dateLabels,
        datasets: [
          {
            label: 'googleplay',
            data: bankChartData[currentBank].googlePlayData,
            borderColor: 'rgba(54, 162, 235, 1)',
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            fill: false,
            tension: 0.1
          },
          {
            label: 'şikayetvar',
            data: bankChartData[currentBank].sikayetvarData,
            borderColor: 'rgba(255, 99, 132, 1)',
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            fill: false,
            tension: 0.1
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: {
            title: {
              display: true,
              text: 'Tarih'
            }
          },
          y: {
            title: {
              display: true,
              text: 'Kayıt Sayısı'
            },
            beginAtZero: true
          }
        },
        plugins: {
          title: { display: false },
          legend: { display: true }
        }
      }
    });
  
    window.timelineCharts[currentBank] = chartInstance;
  }
  

  // Star Rating Category Distribution (Grafikler sayfası)
  function loadRatingDistributionChart() {
    const canvasId = 'myChartRatingDistribution-' + currentBank;
    console.log(canvasId);
    const canvas = document.getElementById(canvasId);
    if (!canvas) {
      console.error("Canvas bulunamadı: " + canvasId);
      return;
    }
    const ctx = canvas.getContext('2d');
  
    // Global nesne oluşturuluyor
    if (!window.ratingCharts) {
      window.ratingCharts = {};
    }
  
    // Aynı bankaya ait grafik varsa destroy edelim
    if (window.ratingCharts[currentBank]) {
      window.ratingCharts[currentBank].destroy();
    }
    const chartInstance = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: bankChartData[currentBank].labelsRating,
        datasets: [{
          label: 'Frequency',
          data: bankChartData[currentBank].frequenciesRating,
          backgroundColor: 'rgba(135, 206, 250, 0.7)',
          borderColor: 'rgba(70, 130, 180, 1)',
          borderWidth: 1
        }]
      },
      options: {
        indexAxis: 'y',
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: {
            title: {
              display: true,
              text: 'Frequency'
            },
            beginAtZero: true
          },
          y: {
            title: {
              display: true,
              text: 'Star Rating Category'
            }
          }
        },
        plugins: {
          title: { display: false },
          legend: { display: false },
          datalabels: {
            formatter: (value, context) => {
              const dataArr = context.chart.data.datasets[0].data;
              const total = dataArr.reduce((a, b) => a + b, 0);
              return ((value / total) * 100).toFixed(1) + '%';
            },
            color: '#333',
            anchor: 'center',
            align: 'center',
            font: { weight: 'bold' }
          }
        }
      },
      plugins: [ChartDataLabels]
    });

    window.ratingCharts[currentBank] = chartInstance;
  }

  // Sayfa yüklendiğinde
  window.onload = function() {
    switchMenu('akbank');
    loadNotes();
    loadTimelineChart();       // Hakkında sayfası çizgi grafiği
    loadRatingDistributionChart(); // Grafikler sayfası bar grafiği
  };